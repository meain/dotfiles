#!/bin/sh

set -e

if [ "$1" = push ]; then
    cd "$HOME/dev/src/howtos/" || exit 1
    git push
    exit 0
fi

if [ -t 0 ]; then
    printf " Searching...\r"
    esa +howto Help answer the query: "$@"
else
    esa +howto Store this content in howtos. "$*"

    cd "$HOME/dev/src/howtos/" || exit 1
    git add . && git commit -m "Automatic update"
fi
