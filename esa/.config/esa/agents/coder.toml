name = "Coder"
description = "A coding assistant with access to various system functions"

system_prompt="""You are Esa, a coding assistant capable of performing various tasks. You will receive a task to complete and have access to different functions that you can use to help you accomplish the task.

When responding to tasks:
1. Analyze the task and determine if you need to use any functions to gather information.
2. If needed, make function calls to gather necessary information.
3. Process the information and formulate your response.
4. Provide only concise responses that directly address the task.

Additional notes:
- You are working in a {{$uname -o}} environment
- The person who will be asking you questions in Abin Simon aka meain
- Abin is a Senior Software Engineer working primary working with Golang
- Use the files available in the current directory to answer questions
- All functions you run will be run in the specific project

Current directory: {{$pwd}}

Remember to keep your responses brief and to the point. Do not provide unnecessary explanations or elaborations unless specifically requested."""

## Get Date and Time
[[functions]]
name = "get_datetime"
description = "Get current date and time"
command = "date"

## Read Webpage
[[functions]]
name = "read_webpage"
description = "Read the contents of a webpage"
command = "readable '{{url}}'"

[[functions.parameters]]
name = "url"
type = "string"
description = "URL of the website to read"
required = true

## Send Notification
[[functions]]
name = "send_notification"
description = "Send a system notification"
command = "notify '{{title}}' '{{message}}'"
safe = true

[[functions.parameters]]
name = "title"
type = "string"
description = "Title of the notification (with single quotes escaped)"
required = true

[[functions.parameters]]
name = "message"
type = "string"
description = "Message content of the notification"
required = true

## Read File
[[functions]]
name = "read_file"
description = "Read the contents of a file"
command = "cat {{show_line_numbers}} {{file}}"
safe = true

[[functions.parameters]]
name = "file"
type = "string"
description = "Path to the file to read"
required = true

[[functions.parameters]]
name = "show_line_numbers"
type = "boolean"
description = "Should show line number"
required = false
format = "-n"

## Write File
[[functions]]
name = "write_file"
description = "Write to a file"
command = "tee {{file}}"
stdin = "{{content}}"

[[functions.parameters]]
name = "file"
type = "string"
description = "File to write"
required = true

[[functions.parameters]]
name = "content"
type = "string"
description = "Content to write"
required = true

## List Directory
[[functions]]
name = "list_directory"
description = "List files in a directory. You only have access to the files in the current and sub directory."
command = "ls ./{{directory}}"
safe = true

[[functions.parameters]]
name = "directory"
type = "string"
description = "Directory to list. All paths should be relative paths. It will be prefixed with `./`"
required = true

## Print Directory Tree
[[functions]]
name = "print_tree"
description = "Print directory tree (only folders)"
command = "tree -d ./{{directory}}"
safe = true

[[functions.parameters]]
name = "directory"
type = "string"
description = "Directory to print tree. All paths should be relative paths. It will be prefixed with `./`"
required = true

## Grep
[[functions]]
name = "search_for_pattern"
description = """Search for a pattern in files. Limited to the top 100 results.
Use more precise queries if you need better results."""
command = "rg '{{pattern}}' ./{{directory}} | head -n 100"
safe = true

[[functions.parameters]]
name = "pattern"
type = "string"
description = "Pattern to search for"
required = true

[[functions.parameters]]
name = "directory"
type = "string"
description = "Directory or file to search in. All paths should be relative paths. It will be prefixed with `./`"
required = true

## Move file (do we need copy file?)
[[functions]]
name = "move_file"
description = "Move a file to a new location"
command = "mv {{source}} {{destination}}"
safe = false

[[functions.parameters]]
name = "source"
type = "string"
description = "Source file to move"
required = true

[[functions.parameters]]
name = "destination"
type = "string"
description = "Destination path to move the file to"
required = true

## Run command
[[functions]]
name = "run_command"
description = "Run a command in the current directory"
command = "{{command}}"
safe = false

[[functions.parameters]]
name = "command"
type = "string"
description = "Command to run"
required = true