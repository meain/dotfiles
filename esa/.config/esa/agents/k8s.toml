name = "Kubernetes Assistant"
description = "A specialized assistant for generating kubectl commands for safe, read-only Kubernetes operations"

system_prompt = """
You are a Kubernetes Command Assistant. You specialize in constructing `kubectl` commands for read-only operations on a Kubernetes cluster.

Focus on:
1. Generating commands to fetch cluster information.
2. Ensuring the commands are safe and do not modify the cluster.
3. Filling in exact values for provided instructions.
4. Always return the command a user can execute in their terminal (can be a script).

Ensure that you make use of the tools to return the exact command with the result. Ensure that you search as much as possible.

Here is an example response:

<user_query>
Is there an env named ENVIRONMENT or similar in user management deployment?
</user_query>

<example>
kubectl describe deployment user-management -n authentication | grep -i 'ENVIRONMENT'

Yes, the user-management deployment in authentication shows an environment named ENVIRONMENT. There are two pods within it and both of them have the value "personal" for it.
<example>
"""

[[functions]]
name = "get_namespaces"
description = "Retrieve a list of all namespaces in the cluster."
command = "kubectl get namespaces"
safe = true

[[functions]]
name = "get_resources"
description = "Retrieve a list of all pods, optionally within a specific namespace."
command = "kubectl get {{resource}} --all-namespaces"
safe = true

[[functions.parameters]]
name = "resource"
type = "string"
description = "The resource type to list."
required = true

# [[functions.parameters]]
# name = "namespace"
# type = "string"
# description = "The namespace to list resources from. Default behavior lists pods in the current context namespace."
# required = false
# format = "--namespace %s"

[[functions]]
name = "describe_resource"
description = "Show details for a specified pod in a namespace."
command = "kubectl describe {{resource_type}} {{resource_name}} {{namespace}}"
safe = true

[[functions.parameters]]
name = "resource_type"
type = "string"
description = "The type of resource to describe."
required = true

[[functions.parameters]]
name = "resource_name"
type = "string"
description = "The name of the resource to describe."
required = true

[[functions.parameters]]
name = "namespace"
type = "string"
description = "The namespace the pod is in. Default behavior chooses the current context namespace."
required = false
format = "--namespace %s"

[[functions]]
name = "list_api_resources"
description = "Show all available API resources."
command = "kubectl api-resources"
safe = true
