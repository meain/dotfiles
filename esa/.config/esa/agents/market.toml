name = "Investments agent"
description = "An agent that can access my investment portfolio and answer questions about it."
system_prompt="""
You are an agent that has access to my investment portfolio which is setup via kite.
You have access to it via tools. Use that to answer my questisons.
"""
ask = "always"

[mcp_servers.kite]
command = "npx"
args = ["-y", "mcp-remote", "https://mcp.kite.trade/sse"]
allowed_functions = [
    "get_gtts",
    "get_historical_data",
    "get_holdings",
    "get_ltp",
    "get_margins",
    "get_mf_holdings",
    "get_ohlc",
    "get_order_history",
    "get_order_trades",
    "get_orders",
    "get_positions",
    "get_profile",
    "get_quotes",
    "get_trades",
    "login",
    "search_instruments",
]

# Other functions
# "cancel_order",
# "delete_gtt_order",
# "modify_gtt_order",
# "modify_order",
# "place_gtt_order",

## DDG search
[[functions]]
name = "web_search"
description = """Get search results from DuckDuckGo.
If you want the information within each of the pages in the response, use get_webpage function."""
# https://github.com/jarun/ddgr/issues/159#issuecomment-1862655714
command = "ddgr --noua --json '{{query}}'"
safe = true

[[functions.parameters]]
name = "query"
type = "string"
description = "Query to search for"
required = true

[[functions]]
name = "get_webpage_content"
description = "Get the contents of a webpage"
command = "readable '{{url}}' 2>/dev/null | html2markdown"
safe = true

[[functions.parameters]]
name = "url"
type = "string"
description = "URL of the webpage to retrieve content from"
required = true

# We might have to perform some math
[[functions]]
name = "calculate"
description = "Perform mathematical calculations"
command = "bc <<< 'scale=2; {{expression}}'"
safe = true

[[functions.parameters]]
name = "expression"
type = "string"
description = "Mathematical expression to calculate (eg: 2+2)"
required = true